(()=>{var t,e;t=jQuery,e={add_location_section:t("#dokan-add-store-location-section"),show_store_location_section_btn:t("#show-add-store-location-section-btn"),cancel_add_location_action:t("#cancel-store-location-section-btn"),store_location_save_btn:t("#dokan-save-store-location-btn"),store_location_list_table:t("#store-pickup-location-list-table"),store_location_action:t(".dokan-store-location-action"),store_location_edit_btn:t(".store-pickup-location-edit-btn"),store_location_delete_btn:t(".store-pickup-location-delete-btn"),store_location_action_wrapper:t(".store-pickup-location-action-wrapper"),multiple_store_location_checkbox:t("#multiple-store-location"),store_location_edit_section:t("#dokan-store-location-edit-section"),store_location_main_section:t(".dokan-store-location-main-section"),store_location_edit_index:document.getElementById("store-location-edit-index"),store_location_name_input:document.getElementById("store-location-name-input"),store_location_street_1_input:document.getElementById("dokan_address[street_1]"),store_location_street_2_input:document.getElementById("dokan_address[street_2]"),store_location_city_input:document.getElementById("dokan_address[city]"),store_location_zip_code_input:document.getElementById("dokan_address[zip]"),store_location_country_input:document.getElementById("dokan_address_country"),store_location_state_input:document.getElementById("dokan_address_state"),init:function(){e.trigger_store_location_pickup_settings()},trigger_store_location_pickup_settings:function(){var e=this;e.show_store_location_section_btn.on("click",(function(t){t.preventDefault(),e.store_location_action_wrapper.hide(),e.store_location_action.hide(),e.open_store_location_section(!0)})),e.cancel_add_location_action.on("click",(function(t){t.preventDefault(),e.reset_form_fields(),e.store_location_action_wrapper.show(),e.store_location_action.show(),e.open_store_location_section(!1)})),e.store_location_save_btn.on("click",(function(o){o.preventDefault();var a={index:e.store_location_edit_index.value,location_name:e.store_location_name_input.value,street_1:e.store_location_street_1_input.value,street_2:e.store_location_street_2_input.value,city:e.store_location_city_input.value,zip:e.store_location_zip_code_input.value,country:e.store_location_country_input.value,state:t("#dokan_address_state").val(),is_multiple_enable:e.multiple_store_location_checkbox.val()};!1!==e.validate_location_data(a)&&t.ajax({url:dokan.ajaxurl,method:"post",data:{action:"dokan_store_location_save_item",_wpnonce:dokan.nonce,data:a,index:a.index}}).done((function(t){t.success&&window.location.reload(!1)})).fail((function(t,e,o){t.responseJSON.data.message&&dokan_sweetalert(t.responseJSON.data.message,{icon:"error"})}))})),e.store_location_delete_btn.on("click",(function(e){e.preventDefault();var o=t(this).data("location-index");t.ajax({url:dokan.ajaxurl,method:"post",data:{action:"dokan_store_location_delete_item",_wpnonce:dokan.nonce,index:o}}).done((function(t){t.success&&window.location.reload(!1)})).fail((function(t){t.responseJSON&&t.responseJSON.data&&t.responseJSON.data.length&&dokan_sweetalert(t.responseJSON.data.pop().message,{icon:"error"})}))})),e.store_location_edit_btn.on("click",(function(o){o.preventDefault();var a=t(this).data("location"),n=t(this).data("location-index");e.store_location_action_wrapper.hide(),e.store_location_edit_index.value=n,e.populate_address_form_data(a),e.state_select(a),e.store_location_action.hide(),e.open_store_location_section(!0),e.store_location_state_input.value=a.state})),e.multiple_store_location_checkbox.on("change",(function(){this.checked?(e.multiple_store_location_checkbox.val("yes"),e.reset_form_fields(),e.cancel_add_location_action.show(),e.store_location_main_section.show(),e.open_store_location_section(!1)):(e.store_location_edit_index.value=0,e.multiple_store_location_checkbox.val("no"),e.restore_default_address_fields(),e.cancel_add_location_action.hide(),e.store_location_main_section.hide(),e.open_store_location_section(!0))})).trigger("change")},state_select:function(e){var o,a=wc_country_select_params.countries.replace(/&quot;/g,'"'),n=t.parseJSON(a),i=t("#dokan_address_state"),_=i.attr("name"),s=i.attr("id"),c=i.attr("class"),l=e.state,r=e.state,d=t("#dokan_address_country").val();if(n[d])if(t.isEmptyObject(n[d]))t("div#dokan-states-box").slideUp(2),i.is("select")&&t("select#dokan_address_state").replaceWith('<input type="text" class="'+c+'" name="'+_+'" id="'+s+'" required />'),t("#dokan_address_state").val("N/A");else{var u="",p=n[d];for(var k in p)p.hasOwnProperty(k)&&(l&&(o=l===k?'selected="selected"':""),u=u+'<option value="'+k+'"'+o+">"+p[k]+"</option>");i.is("select")&&t("select#dokan_address_state").html('<option value="">'+wc_country_select_params.i18n_select_state_text+"</option>"+u),i.is("input")&&(t("input#dokan_address_state").replaceWith('<select type="text" class="'+c+'" name="'+_+'" id="'+s+'" required ></select>'),t("select#dokan_address_state").html('<option value="">'+wc_country_select_params.i18n_select_state_text+"</option>"+u)),t("#dokan_address_state").removeClass("dokan-hide"),t("div#dokan-states-box").slideDown()}else i.is("select")&&(r=e.state,t("select#dokan_address_state").replaceWith('<input type="text" class="'+c+'" name="'+_+'" id="'+s+'" required="required"/>')),t("#dokan_address_state").val(r),"N/A"==t("#dokan_address_state").val()&&t("#dokan_address_state").val(""),t("#dokan_address_state").removeClass("dokan-hide"),t("div#dokan-states-box").slideDown()},open_store_location_section:function(t){t?(this.add_location_section.show(300),this.show_store_location_section_btn.hide(300)):(this.add_location_section.hide(300),this.show_store_location_section_btn.show(300))},reset_form_fields:function(){this.store_location_edit_index.value="",this.store_location_name_input.value="",this.store_location_street_1_input.value="",this.store_location_street_2_input.value="",this.store_location_city_input.value="",this.store_location_zip_code_input.value="",this.store_location_country_input.value="",this.store_location_state_input.value=""},validate_location_data:function(e){return e.location_name?t("#dokan_address_state").is(":visible")&&!e.state?(dokan_sweetalert(dokan.i18n_location_state,{icon:"error"}),!1):!!e.country||(dokan_sweetalert(dokan.i18n_country_name,{icon:"error"}),!1):(dokan_sweetalert(dokan.i18n_location_name,{icon:"error"}),!1)},populate_address_form_data:function(t){this.store_location_name_input.value=t.location_name,this.store_location_street_1_input.value=t.street_1,this.store_location_street_2_input.value=t.street_2,this.store_location_city_input.value=t.city,this.store_location_zip_code_input.value=t.zip,this.store_location_country_input.value=t.country},restore_default_address_fields:function(){if("undefined"!=typeof dokan_vendor_default_address&&0!==dokan_vendor_default_address.length){var t=dokan_vendor_default_address;this.populate_address_form_data(t),this.state_select(t)}}},jQuery(document).ready((function(t){e.init()}))})();